{% extends 'headerfooterlinks.html' %}

{% block title %} Parent Dashboard | AbrayTech {% endblock %}

{% load static %}

{% block content %}
<!-- Breadcrumbs Section -->
<section class="breadcrumbs-section py-5 bg-light" style="margin-top: 80px; padding-top: 20px;">
    <div class="container">
        <nav style="--bs-breadcrumb-divider: '›';" aria-label="breadcrumb">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Parent Dashboard</li>
            </ol>
        </nav>
    </div>
</section><!-- End Breadcrumbs -->

<section id="parent-dashboard" class="parent-dashboard section">
    <div class="container" data-aos="fade-up">

        <div class="section-title">
            <h2>Parent Dashboard</h2>
            <p>Overview of your child’s attendance, grades, and timetable.</p>
        </div>

        <div class="row gy-4">
            <!-- Child Summary Card -->
            <div class="col-lg-4">
                <div class="card text-center shadow-sm p-3">
                    <img src="{% static 'assets/img/child-avatar.png' %}" alt="Child Avatar" class="img-fluid rounded-circle mb-3" style="width: 120px; height: 120px;">
                    <h5 class="card-title">{{ child.full_name }}</h5>
                    <p class="text-muted">{{ child.class_name }}</p>
                </div>
            </div>

            <!-- Attendance, Grades, Timetable Overview -->
            <div class="col-lg-8">
                <div class="row gy-4">
                    <div class="col-md-4">
                        <div class="p-3 border rounded bg-light text-center shadow-sm">
                            <h6>Attendance</h6>
                            <p class="fs-4 fw-bold text-success">{{ child.attendance_percentage }}%</p>
                            <a href="{ url 'parent_attendance_records' child.id %}" class="small">View Details</a>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="p-3 border rounded bg-light text-center shadow-sm">
                            <h6>Average Grade</h6>
                            <p class="fs-4 fw-bold text-primary">{{ child.average_grade }}%</p>
                            <a href="{ url 'parent_grades_reports' child.id %}" class="small">View Grades</a>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="p-3 border rounded bg-light text-center shadow-sm">
                            <h6>Today's Classes</h6>
                            {% if today_classes %}
                                <ul class="list-unstyled mb-0">
                                    {% for class in today_classes %}
                                        <li>{{ class.subject }} ({{ class.time }})</li>
                                    {% endfor %}
                                </ul>
                            {% else %}
                                <p class="text-muted">No classes today</p>
                            {% endif %}
                            <a href="{ url 'parent_timetable' child.id %}" class="small">View Full Timetable</a>
                        </div>
                    </div>
                </div>
            </div>

        </div><!-- End Row -->

    </div>
</section>
{% endblock %}
