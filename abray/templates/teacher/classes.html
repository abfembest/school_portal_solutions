{% extends 'teacher/base.html' %}

{% block title %} My Classes | AbrayTech {% endblock %}

{% load static %}

{% block content %}
<!-- Breadcrumbs Section -->
<section class="breadcrumbs-section py-5 bg-light" style="margin-top: 80px; padding-top: 20px;">
    <div class="container">
        <nav style="--bs-breadcrumb-divider: 'â€º';" aria-label="breadcrumb">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
                <li class="breadcrumb-item"><a href="{% url 'teacher_dashboard' %}">Dashboard</a></li>
                <li class="breadcrumb-item active" aria-current="page">My Classes</li>
            </ol>
        </nav>
    </div>
</section><!-- End Breadcrumbs -->

<section id="my-classes" class="my-classes section">
    <div class="container" data-aos="fade-up">

        <div class="section-title">
            <h2>My Classes</h2>
            <p>View and manage your assigned classes and course materials.</p>
        </div>

        <div class="row gy-4">
            <!-- Classes List -->
            <div class="col-lg-6">
                <div class="card shadow-sm p-4">
                    <h4 class="mb-4">Assigned Classes</h4>
                    {% if classes %}
                        <ul class="list-group">
                            {% for class in classes %}
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    <span>{{ class.name }}</span>
                                    <a href="{ url 'class_detail' class.id %}" class="btn btn-sm btn-outline-primary">View</a>
                                </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <p>No classes assigned yet.</p>
                    {% endif %}
                </div>
            </div>

            <!-- Upload Course Materials -->
            <div class="col-lg-6">
                <div class="card shadow-sm p-4">
                    <h4 class="mb-4">Upload Course Materials</h4>
                    <form method="post" enctype="multipart/form-data" action="{ url 'upload_material' %}" class="php-email-form">
                        {% csrf_token %}
                        <div class="mb-3">
                            <label for="class" class="pb-2">Select Class</label>
                            <select name="class_id" id="class" class="form-control" required>
                                <option value="">-- Select Class --</option>
                                {% for class in classes %}
                                    <option value="{{ class.id }}">{{ class.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="material_title" class="pb-2">Material Title</label>
                            <input type="text" name="material_title" id="material_title" class="form-control" placeholder="e.g. Week 1 Lecture Notes" required>
                        </div>
                        <div class="mb-3">
                            <label for="material_file" class="pb-2">Upload File</label>
                            <input type="file" name="material_file" id="material_file" class="form-control" accept=".pdf,.ppt,.pptx,.doc,.docx,.mp4,.avi" required>
                            <small class="text-muted">Allowed formats: PDF, PPT, Word, MP4, AVI</small>
                        </div>
                        <div class="text-center">
                            <button type="submit" class="btn btn-success w-100">Upload Material</button>
                        </div>
                    </form>
                </div>
            </div>

        </div>

    </div>
</section>
{% endblock %}
