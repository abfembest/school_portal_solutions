{% extends 'school_admin/base.html' %}

{% block title %} Manage Classes & Courses | AbrayTech {% endblock %}

{% load static %}

{% block content %}
<!-- Breadcrumbs Section -->
<section class="breadcrumbs-section py-5 bg-light" style="margin-top: 80px; padding-top: 20px;">
    <div class="container">
        <nav style="--bs-breadcrumb-divider: 'â€º';" aria-label="breadcrumb">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
                <li class="breadcrumb-item"><a href="{% url 'admin_dashboard' %}">Admin Dashboard</a></li>
                <li class="breadcrumb-item active" aria-current="page">Manage Classes & Courses</li>
            </ol>
        </nav>
    </div>
</section><!-- End Breadcrumbs -->

<section id="manage-classes-courses" class="manage-classes-courses-section section">
    <div class="container" data-aos="fade-up">
        <div class="section-title">
            <h2>Manage Classes & Courses</h2>
            <p>Efficiently create, manage, and assign courses to teachers.</p>
        </div>

        <div class="row">
            <!-- Create Course Form -->
            <div class="col-md-6">
                <h4>Create New Course</h4>
                <form method="post" action="{ url 'create_course' %}" class="bg-white shadow-sm p-4 rounded">
                    {% csrf_token %}
                    <div class="form-group mb-3">
                        <label for="course-name">Course Name</label>
                        <input type="text" class="form-control" id="course-name" name="course_name" placeholder="Enter course name" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="course-description">Course Description</label>
                        <textarea class="form-control" id="course-description" name="course_description" rows="4" placeholder="Enter course description" required></textarea>
                    </div>
                    <div class="form-group mb-3">
                        <label for="course-teacher">Assign Teacher</label>
                        <select class="form-control" id="course-teacher" name="course_teacher" required>
                            <option value="">Select Teacher</option>
                            {% for teacher in teachers %}
                            <option value="{{ teacher.id }}">{{ teacher.name }}</option>
                            {% empty %}
                            <option>No teachers available</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <label for="course-duration">Course Duration (Weeks)</label>
                        <input type="number" class="form-control" id="course-duration" name="course_duration" placeholder="Enter duration in weeks" required>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Create Course</button>
                </form>
            </div>

            <!-- Course List -->
            <div class="col-md-6">
                <h4>Existing Courses</h4>
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Course Name</th>
                                <th>Assigned Teacher</th>
                                <th>Duration</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for course in courses %}
                            <tr>
                                <td>{{ course.name }}</td>
                                <td>{{ course.teacher.name }}</td>
                                <td>{{ course.duration }} weeks</td>
                                <td>
                                    <a href="{ url 'edit_course' course.id %}" class="btn btn-warning btn-sm">Edit</a>
                                    <a href="{ url 'delete_course' course.id %}" class="btn btn-danger btn-sm">Delete</a>
                                </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="4" class="text-center">No courses available.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}
